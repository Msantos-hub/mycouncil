<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: views/Sugerencias.vue</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: views/Sugerencias.vue</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
  &lt;v-container>
    &lt;v-row>
      &lt;v-col cols="12" md="12" class="mt-10">
        &lt;h3>
          Esta seccion de sugerencias, es unicamente para mandar sugerencias
          respecto a los comics que los usuarios registrados aconsejan a침adir en
          un futuro. &lt;br />
          Si no esta registrado puede registrarse en el boton de arriba en la
          esquina derecha. &lt;br />
          Muchas gracias por su contribuci칩n. &lt;br />
          Atentamente MyCouncil Staff.
        &lt;/h3>
      &lt;/v-col>
      &lt;v-col cols="12" md="12">
        &lt;v-form ref="form">
          &lt;v-text-field
            v-model="newSugerencia.nombreComic"
            :rules="nameRules"
            label="Nombre del comic"
            required
          >&lt;/v-text-field>
          &lt;v-text-field
            v-model="newSugerencia.description"
            :rules="desRules"
            :counter="300"
            label="Descripcion del comic"
            required
            class="mb-10"
          >&lt;/v-text-field>
          &lt;v-btn color="success" class="mr-4" @click="addSugerencia(), clear()">
            Enviar sugerencia
          &lt;/v-btn>
          &lt;v-btn color="warning" @click="clear()">
            Reiniciar formulario
          &lt;/v-btn>
        &lt;/v-form>
      &lt;/v-col>
    &lt;/v-row>
  &lt;/v-container>
&lt;/template>

&lt;script>
import axios from "axios";

export default {
  /**
   *  contiene todas las variables usadas en la vista
   */
  data() {
    return {
      valid: false,
      nombreComic: "",
      nameRules: [(v) => !!v || "No se a rellenado el nombre del comic"],
      description: "",
      desRules: [
        (v) => !!v || "No se a rellenado la descripcion",
        (v) =>
          v.length &lt;= 300 ||
          "La descripcion debe ser de menos de 300 caracteres",
      ],
      newSugerencia: {
        nombreComic: "",
        description: "",
        idUsuario: localStorage.getItem("id"),
      },
    };
  },

  /**
   * contiene todas las funciones usadas en la vista
   */
  methods: {
    /**
     * funcion que a침ade una nueva sugerencia, mediante una peticion axios manda a la pagina php los datos para realizar la consulta
     */
    addSugerencia() {
      const _this = this;
      var formData = _this.toFormData(_this.newSugerencia);
      axios
        .post(
          "http://localhost/proyecto/mycouncil/src/bbdd/sugerencias.php?accion=sug",
          formData
        )
        .then(function(response) {
          _this.newSugerencia = {
            nombreComic: "",
            description: "",
            idUsuario: "",
          };
          if (response.data.error) {
            _this.errorMsg = response.data.message;
          } else {
            _this.successMsg = response.data.message;
          }
        });
    },
    toFormData(obj) {
      var fd = new FormData();
      for (var i in obj) {
        fd.append(i, obj[i]);
      }
      return fd;
    },
    /**
     * cambia el estado de las variables a vacio
     */
    clear() {
      this.nombreComic = "";
      this.description = "";
    },
  },
};
&lt;/script>
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#routes">routes</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Dec 10 2021 16:51:23 GMT+0100 (hora est치ndar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
